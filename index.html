<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Subramanya G. Bellary — Computer Vision Engineer</title>
<meta name="description" content="Portfolio of Subramanya Gopal Bellary — Computer Vision Engineer specializing in industrial AI, deep learning, and real-time monitoring systems.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Instrument+Serif:ital@0;1&family=DM+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#0a0a0b;--bg2:#111113;--bg3:#18181b;
  --text:#e4e4e7;--text-dim:#71717a;--text-bright:#fafafa;
  --accent:#10b981;--accent2:#34d399;--accent-dim:#064e3b;
  --orange:#f97316;--blue:#3b82f6;
  --border:#27272a;--border-light:#3f3f46;
  --mono:'Space Mono',monospace;
  --serif:'Instrument Serif',serif;
  --sans:'DM Sans',sans-serif;
}
html{scrollbar-width:thin;scrollbar-color:var(--accent-dim) var(--bg)}
body{background:var(--bg);color:var(--text);font-family:var(--sans);line-height:1.6;overflow-x:hidden}
::selection{background:var(--accent);color:var(--bg)}

body::before{content:'';position:fixed;inset:0;z-index:9999;pointer-events:none;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
  opacity:.4}
body::after{content:'';position:fixed;inset:0;z-index:9998;pointer-events:none;
  background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,.03) 2px,rgba(0,0,0,.03) 4px)}

a{color:var(--accent);text-decoration:none;transition:color .2s}
a:hover{color:var(--accent2)}

/* SCROLL PROGRESS */
#scroll-progress{position:fixed;top:0;left:0;height:3px;background:linear-gradient(90deg,var(--accent),var(--accent2));z-index:200;width:0;transition:width .1s linear}

/* NAV */
nav{position:fixed;top:0;left:0;right:0;z-index:100;padding:1rem 2rem;
  display:flex;justify-content:space-between;align-items:center;
  background:rgba(10,10,11,.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border)}
.nav-logo{font-family:var(--mono);font-size:.85rem;font-weight:700;color:var(--accent);letter-spacing:2px;cursor:pointer}
.nav-logo span{color:var(--text-dim)}
.nav-links{display:flex;gap:2rem;list-style:none}
.nav-links a{font-family:var(--mono);font-size:.7rem;letter-spacing:2px;text-transform:uppercase;color:var(--text-dim);
  transition:all .3s;position:relative;cursor:pointer}
.nav-links a::after{content:'';position:absolute;bottom:-4px;left:0;width:0;height:1px;background:var(--accent);transition:width .3s}
.nav-links a:hover{color:var(--accent)}
.nav-links a:hover::after{width:100%}
.nav-links a.active{color:var(--accent)}
.nav-links a.active::after{width:100%}
.nav-status{display:flex;align-items:center;gap:.5rem;font-family:var(--mono);font-size:.65rem;color:var(--accent);letter-spacing:1px}
.nav-status .dot{width:6px;height:6px;border-radius:50%;background:var(--accent);animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1;box-shadow:0 0 0 0 rgba(16,185,129,.7)}70%{opacity:1;box-shadow:0 0 0 6px rgba(16,185,129,0)}}

/* MOBILE NAV */
.nav-hamburger{display:none;flex-direction:column;gap:4px;cursor:pointer;z-index:101}
.nav-hamburger span{display:block;width:20px;height:2px;background:var(--text-dim);transition:all .3s}
@media(max-width:768px){
  .nav-links{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(10,10,11,.97);
    flex-direction:column;align-items:center;justify-content:center;gap:2rem;z-index:99}
  .nav-links.open{display:flex}
  .nav-hamburger{display:flex}
  .nav-status{display:none}
  nav{padding:.8rem 1.2rem}
}

/* CANVAS */
#factory-canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0}

/* SCROLL CONTAINER */
.scroll-container{position:relative;z-index:1;width:100%;height:700vh;pointer-events:none}

/* STATION OVERLAYS */
.station-overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
  z-index:10;opacity:0;pointer-events:none;transition:opacity .3s ease;padding:80px 2rem 2rem}
.station-overlay.visible{opacity:1;pointer-events:auto}
.station-overlay .content{max-width:900px;width:100%;position:relative}

/* GLASSMORPHISM PANEL */
.glass-panel{background:rgba(10,10,11,.75);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);
  border:1px solid var(--border);border-radius:12px;padding:2rem;position:relative;overflow:hidden}
.glass-panel::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;
  background:linear-gradient(90deg,transparent,var(--accent-dim),transparent)}

/* SECTION LABELS */
.section-label{font-family:var(--mono);font-size:.65rem;letter-spacing:3px;text-transform:uppercase;
  color:var(--accent);margin-bottom:.5rem;display:flex;align-items:center;gap:.5rem}
.section-label::before{content:'//';color:var(--text-dim)}
.section-title{font-family:var(--serif);font-size:clamp(1.5rem,3vw,2.2rem);color:var(--text-bright);
  margin-bottom:1rem;line-height:1.3}

/* HERO */
.hero-label{font-family:var(--mono);font-size:clamp(.6rem,.8vw,.75rem);letter-spacing:3px;text-transform:uppercase;
  color:var(--text-dim);margin-bottom:1rem;display:flex;align-items:center;gap:.75rem}
.hero-label::before{content:'';width:24px;height:1px;background:var(--accent)}
.hero-h1{font-family:var(--serif);font-size:clamp(2rem,5vw,3.5rem);line-height:1.15;color:var(--text-bright);
  margin-bottom:1.5rem;max-width:750px}
.hero-h1 em{font-style:italic;color:var(--accent2);background:linear-gradient(135deg,var(--accent),var(--accent2));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hero-sub{font-size:clamp(.85rem,1.1vw,1rem);color:var(--text-dim);max-width:600px;margin-bottom:2.5rem;line-height:1.7}
.hero-stats{display:flex;gap:2rem;flex-wrap:wrap}
.hero-stat{text-align:left}
.hero-stat .num{font-family:var(--mono);font-size:clamp(1.2rem,2vw,1.6rem);color:var(--accent);font-weight:700}
.hero-stat .label{font-size:.7rem;color:var(--text-dim);text-transform:uppercase;letter-spacing:1px;margin-top:.15rem}

/* ABOUT */
.about-grid{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-top:1.5rem}
.about-bio{font-size:.9rem;color:var(--text-dim);line-height:1.8;margin-bottom:1.5rem}
.info-card{background:rgba(16,185,129,.03);border:1px solid var(--border);border-radius:8px;padding:1rem 1.2rem}
.info-card .card-label{font-family:var(--mono);font-size:.6rem;letter-spacing:2px;text-transform:uppercase;color:var(--accent);margin-bottom:.3rem}
.info-card .card-value{font-size:.85rem;color:var(--text-bright)}

/* SKILLS */
.skills-grid{display:grid;grid-template-columns:1fr 1fr;gap:1.2rem;margin-top:1.5rem}
.skill-group{background:rgba(16,185,129,.02);border:1px solid var(--border);border-radius:10px;padding:1.2rem}
.skill-group-title{font-family:var(--mono);font-size:.7rem;letter-spacing:2px;text-transform:uppercase;color:var(--accent);
  margin-bottom:.8rem;display:flex;align-items:center;gap:.5rem}
.skill-group-title::before{content:'>';color:var(--orange)}
.skill-tags{display:flex;flex-wrap:wrap;gap:.4rem}
.skill-tag{font-size:.7rem;padding:.25rem .6rem;background:rgba(255,255,255,.04);border:1px solid var(--border);
  border-radius:4px;color:var(--text-dim);transition:all .2s}
.skill-tag:hover{border-color:var(--accent);color:var(--accent)}

/* EXPERIENCE */
.timeline{position:relative;margin-top:1.5rem;padding-left:1.5rem;border-left:2px solid var(--border)}
.timeline-item{position:relative;margin-bottom:1.5rem;padding-bottom:1.5rem;border-bottom:1px solid rgba(39,39,42,.5)}
.timeline-item:last-child{margin-bottom:0;padding-bottom:0;border-bottom:none}
.timeline-item::before{content:'';position:absolute;left:-1.75rem;top:.3rem;width:10px;height:10px;
  border-radius:50%;background:var(--bg);border:2px solid var(--accent)}
.timeline-item.current::before{background:var(--accent);box-shadow:0 0 10px rgba(16,185,129,.5)}
.timeline-date{font-family:var(--mono);font-size:.65rem;color:var(--accent);letter-spacing:1px;margin-bottom:.25rem}
.timeline-role{font-size:.95rem;font-weight:600;color:var(--text-bright);margin-bottom:.15rem}
.timeline-company{font-size:.8rem;color:var(--text-dim)}
.timeline-desc{font-size:.8rem;color:var(--text-dim);margin-top:.4rem;line-height:1.6}

/* CLIENTS */
.clients-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;margin-top:1.5rem}
.client-card{background:rgba(255,255,255,.03);border:1px solid var(--border);border-radius:10px;
  padding:1.5rem;text-align:center;transition:all .3s}
.client-card:hover{border-color:var(--accent);transform:translateY(-2px)}
.client-name{font-family:var(--mono);font-size:.8rem;color:var(--text-bright);letter-spacing:1px}
.client-type{font-size:.65rem;color:var(--text-dim);margin-top:.3rem}

/* PROJECTS */
.project-filters{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1.5rem;margin-top:1rem}
.filter-btn{font-family:var(--mono);font-size:.6rem;letter-spacing:1px;text-transform:uppercase;
  padding:.4rem .8rem;border:1px solid var(--border);border-radius:4px;background:transparent;
  color:var(--text-dim);cursor:pointer;transition:all .2s}
.filter-btn:hover,.filter-btn.active{border-color:var(--accent);color:var(--accent);background:rgba(16,185,129,.08)}
.projects-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem;max-height:55vh;overflow-y:auto;
  padding-right:.5rem;scrollbar-width:thin;scrollbar-color:var(--accent-dim) transparent}
.project-card{background:rgba(16,185,129,.02);border:1px solid var(--border);border-radius:8px;
  padding:1rem;transition:all .3s;cursor:default}
.project-card:hover{border-color:var(--accent);transform:translateY(-1px)}
.project-card.hidden{display:none}
.project-category{font-family:var(--mono);font-size:.55rem;letter-spacing:2px;text-transform:uppercase;
  color:var(--orange);margin-bottom:.4rem}
.project-title{font-size:.85rem;font-weight:600;color:var(--text-bright);margin-bottom:.2rem}
.project-client{font-size:.7rem;color:var(--accent);margin-bottom:.4rem}
.project-desc{font-size:.75rem;color:var(--text-dim);line-height:1.5;margin-bottom:.6rem}
.project-tags{display:flex;flex-wrap:wrap;gap:.3rem}
.project-tag{font-size:.55rem;padding:.15rem .4rem;background:rgba(255,255,255,.04);border:1px solid var(--border);
  border-radius:3px;color:var(--text-dim)}

/* CONTACT */
.contact-content{text-align:center}
.contact-title{font-family:var(--serif);font-size:clamp(1.8rem,4vw,2.8rem);color:var(--text-bright);margin-bottom:1rem}
.contact-sub{font-size:.95rem;color:var(--text-dim);max-width:500px;margin:0 auto 2rem;line-height:1.7}
.contact-links{display:flex;flex-wrap:wrap;justify-content:center;gap:1rem;margin-bottom:2rem}
.contact-link{display:flex;align-items:center;gap:.5rem;padding:.7rem 1.2rem;
  background:rgba(16,185,129,.05);border:1px solid var(--border);border-radius:8px;
  font-family:var(--mono);font-size:.75rem;color:var(--text);transition:all .3s}
.contact-link:hover{border-color:var(--accent);color:var(--accent);transform:translateY(-2px)}
.contact-link svg{width:16px;height:16px;fill:currentColor}

/* FOOTER */
.footer-text{font-size:.7rem;color:var(--text-dim);text-align:center;margin-top:2rem;padding-top:1rem;
  border-top:1px solid var(--border)}
.footer-text span{color:var(--accent)}

/* NO WEBGL FALLBACK */
.no-webgl{display:none;position:fixed;inset:0;z-index:0;background:var(--bg);
  background-image:radial-gradient(circle at 20% 50%,rgba(16,185,129,.03) 0%,transparent 50%),
  radial-gradient(circle at 80% 80%,rgba(249,115,22,.02) 0%,transparent 50%)}
.no-webgl.active{display:block}

/* RESPONSIVE */
@media(max-width:768px){
  .station-overlay{padding:70px 1rem 1rem}
  .about-grid{grid-template-columns:1fr}
  .skills-grid{grid-template-columns:1fr}
  .projects-grid{grid-template-columns:1fr}
  .clients-grid{grid-template-columns:repeat(2,1fr)}
  .hero-stats{gap:1.2rem}
  .glass-panel{padding:1.2rem}
  .timeline{padding-left:1rem}
  .timeline-item::before{left:-1.3rem}
}

/* Education subsection */
.edu-section{margin-top:1.5rem;padding-top:1rem;border-top:1px solid var(--border)}
.edu-item{margin-bottom:.6rem}
.edu-title{font-size:.8rem;color:var(--text-bright);font-weight:500}
.edu-detail{font-size:.7rem;color:var(--text-dim)}

/* Scrollbar for overlays */
.station-overlay .content{max-height:calc(100vh - 100px);overflow-y:auto;scrollbar-width:thin;
  scrollbar-color:var(--accent-dim) transparent;padding-right:4px}
</style>
</head>
<body>

<!-- Scroll Progress Bar -->
<div id="scroll-progress"></div>

<!-- Navigation -->
<nav>
  <div class="nav-logo" onclick="scrollToStation(0)">SGB<span>.dev</span></div>
  <div class="nav-hamburger" onclick="toggleMobileNav()">
    <span></span><span></span><span></span>
  </div>
  <ul class="nav-links" id="navLinks">
    <li><a onclick="scrollToStation(1)" data-station="1">About</a></li>
    <li><a onclick="scrollToStation(2)" data-station="2">Skills</a></li>
    <li><a onclick="scrollToStation(3)" data-station="3">Experience</a></li>
    <li><a onclick="scrollToStation(4)" data-station="4">Projects</a></li>
    <li><a onclick="scrollToStation(5)" data-station="5">Contact</a></li>
  </ul>
  <div class="nav-status"><span class="dot"></span> Open to Work</div>
</nav>

<!-- 3D Canvas -->
<canvas id="factory-canvas"></canvas>

<!-- No WebGL Fallback -->
<div class="no-webgl" id="noWebgl"></div>

<!-- ==================== STATION OVERLAYS ==================== -->

<!-- HERO STATION -->
<div class="station-overlay" id="hero-station">
  <div class="content">
    <div class="hero-label">Computer Vision Engineer &mdash; Bengaluru, India</div>
    <h1 class="hero-h1">Building <em>intelligent vision</em> systems for the real world.</h1>
    <p class="hero-sub">4+ years engineering production-grade computer vision, deep learning, and real-time monitoring systems for steel manufacturing, automotive, and industrial automation.</p>
    <div class="hero-stats">
      <div class="hero-stat">
        <div class="num" data-target="36">0</div>
        <div class="label">Projects Deployed</div>
      </div>
      <div class="hero-stat">
        <div class="num" data-target="4">0</div>
        <div class="label">Years Experience</div>
      </div>
      <div class="hero-stat">
        <div class="num" data-target="6">0</div>
        <div class="label">Major Clients</div>
      </div>
      <div class="hero-stat">
        <div class="num" data-target="24">0</div>
        <div class="label">24/7 Production Systems</div>
      </div>
    </div>
  </div>
</div>

<!-- ABOUT STATION -->
<div class="station-overlay" id="about-station">
  <div class="content">
    <div class="glass-panel">
      <div class="section-label">About</div>
      <div class="section-title">Who I am</div>
      <p class="about-bio">I'm a results-driven Software Engineer specialized in computer vision, deep learning, and real-time industrial monitoring. I've delivered 36+ end-to-end vision-based solutions across major clients including JSW Steel, SAIL Bhilai, Toyota Kirloskar Motor, and Honda. My work spans the full lifecycle — from requirement gathering with plant engineers, to algorithm development, to on-site deployment and post-production support. I've built systems that measure 1200&deg;C steel slabs in real-time, detect fires on conveyor belts, prevent blast furnace breakouts, and ensure safety in hazardous industrial zones. Currently leading a team of engineers at Deevia Software India, architecting scalable, high-performance systems that combine YOLO, SAM, SOLOv2 with industrial cameras, PLCs, and HMIs.</p>
      <div class="about-grid">
        <div class="info-card">
          <div class="card-label">Current Role</div>
          <div class="card-value">Technical Lead @ Deevia Software India</div>
        </div>
        <div class="info-card">
          <div class="card-label">Location</div>
          <div class="card-value">Bengaluru, Karnataka, India</div>
        </div>
        <div class="info-card">
          <div class="card-label">Specialization</div>
          <div class="card-value">Computer Vision &bull; Deep Learning &bull; Industrial AI</div>
        </div>
        <div class="info-card">
          <div class="card-label">Education</div>
          <div class="card-value">B.E. Computer Science — Basaveshwara Engineering College</div>
        </div>
        <div class="info-card" style="grid-column:span 2">
          <div class="card-label">Languages</div>
          <div class="card-value">English &bull; Hindi &bull; Kannada (Native) &bull; Telugu</div>
        </div>
      </div>
      <div class="edu-section">
        <div class="section-label" style="margin-bottom:.8rem">Education</div>
        <div class="edu-item">
          <div class="edu-title">B.E. Computer Science — Basaveshwara Engineering College (Autonomous), Bagalkot</div>
          <div class="edu-detail">Aug 2019 – Aug 2022 &bull; CGPA 7.13 &bull; VTU</div>
        </div>
        <div class="edu-item">
          <div class="edu-title">Diploma CSE — Govt. Polytechnic College, Lingasugur</div>
          <div class="edu-detail">71.92%</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- SKILLS STATION -->
<div class="station-overlay" id="skills-station">
  <div class="content">
    <div class="glass-panel">
      <div class="section-label">Technical Arsenal</div>
      <div class="section-title">What I work with</div>
      <div class="skills-grid">
        <div class="skill-group">
          <div class="skill-group-title">Computer Vision &amp; AI</div>
          <div class="skill-tags">
            <span class="skill-tag">OpenCV</span>
            <span class="skill-tag">YOLO v5/v8</span>
            <span class="skill-tag">SOLOv2</span>
            <span class="skill-tag">SAM</span>
            <span class="skill-tag">TensorFlow</span>
            <span class="skill-tag">Object Detection</span>
            <span class="skill-tag">Instance Segmentation</span>
            <span class="skill-tag">Semantic Segmentation</span>
            <span class="skill-tag">Anomaly Detection</span>
            <span class="skill-tag">OCR</span>
            <span class="skill-tag">Video Analytics</span>
          </div>
        </div>
        <div class="skill-group">
          <div class="skill-group-title">Programming &amp; Backend</div>
          <div class="skill-tags">
            <span class="skill-tag">Python (Expert)</span>
            <span class="skill-tag">FastAPI</span>
            <span class="skill-tag">Flask</span>
            <span class="skill-tag">Django</span>
            <span class="skill-tag">REST APIs</span>
            <span class="skill-tag">PostgreSQL</span>
            <span class="skill-tag">MySQL</span>
            <span class="skill-tag">SQL</span>
          </div>
        </div>
        <div class="skill-group">
          <div class="skill-group-title">Industrial Systems</div>
          <div class="skill-tags">
            <span class="skill-tag">Thermal Cameras</span>
            <span class="skill-tag">Line-Scan Cameras</span>
            <span class="skill-tag">Area-Scan Cameras</span>
            <span class="skill-tag">High-Temp Cameras</span>
            <span class="skill-tag">Raspberry Pi</span>
            <span class="skill-tag">Delta PLC</span>
            <span class="skill-tag">Siemens PLC</span>
            <span class="skill-tag">Ladder Logic</span>
            <span class="skill-tag">HMI Integration</span>
          </div>
        </div>
        <div class="skill-group">
          <div class="skill-group-title">Tools &amp; Design</div>
          <div class="skill-tags">
            <span class="skill-tag">Git</span>
            <span class="skill-tag">Linux</span>
            <span class="skill-tag">Postman</span>
            <span class="skill-tag">Figma</span>
            <span class="skill-tag">HTML/CSS</span>
            <span class="skill-tag">System Design (HLD/LLD)</span>
            <span class="skill-tag">Debugging</span>
            <span class="skill-tag">Deployment</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- EXPERIENCE STATION -->
<div class="station-overlay" id="experience-station">
  <div class="content">
    <div class="glass-panel">
      <div class="section-label">Career Path</div>
      <div class="section-title">Where I've been</div>
      <div class="timeline">
        <div class="timeline-item current">
          <div class="timeline-date">Apr 2025 — Present</div>
          <div class="timeline-role">Technical Lead</div>
          <div class="timeline-company">Deevia Software India Pvt. Ltd., Bengaluru</div>
          <div class="timeline-desc">Leading team of 1-3 engineers. Delivered 20+ industrial monitoring systems using YOLO, SOLOv2, and SAM for steel plants and automotive clients.</div>
        </div>
        <div class="timeline-item">
          <div class="timeline-date">Apr 2024 — Apr 2025</div>
          <div class="timeline-role">Software Engineer</div>
          <div class="timeline-company">Deevia Software India Pvt. Ltd., Bengaluru</div>
          <div class="timeline-desc">Developed SAM Slab Positioning System, RPi Vibration Monitor, and AI Intrusion Detection systems for JSW Steel plants.</div>
        </div>
        <div class="timeline-item">
          <div class="timeline-date">Apr 2023 — Apr 2024</div>
          <div class="timeline-role">Associate Software Engineer</div>
          <div class="timeline-company">Deevia Software India Pvt. Ltd., Bengaluru</div>
          <div class="timeline-desc">Built Tuyeres Monitoring System for blast furnaces. Gained thermal imaging expertise and industrial camera integration skills.</div>
        </div>
        <div class="timeline-item">
          <div class="timeline-date">Aug 2022 — Apr 2023</div>
          <div class="timeline-role">Trainee Engineer</div>
          <div class="timeline-company">Deevia Software India Pvt. Ltd., Bengaluru</div>
          <div class="timeline-desc">Developed Flow Monitoring System. Built foundation in Python, OpenCV, Flask for industrial applications.</div>
        </div>
        <div class="timeline-item">
          <div class="timeline-date">Jul 2021 — Sep 2021</div>
          <div class="timeline-role">Software Development Intern</div>
          <div class="timeline-company">TechCiti Software Consulting, Bengaluru</div>
          <div class="timeline-desc">Built Django Book Store App. Learned full-stack web development fundamentals.</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- CLIENTS STATION -->
<div class="station-overlay" id="clients-station">
  <div class="content">
    <div class="glass-panel">
      <div class="section-label">Clients</div>
      <div class="section-title">Trusted by Industry Leaders</div>
      <div class="clients-grid">
        <div class="client-card">
          <div class="client-name">JSW Steel</div>
          <div class="client-type">Steel Manufacturing — Bellary</div>
        </div>
        <div class="client-card">
          <div class="client-name">SAIL Bhilai</div>
          <div class="client-type">Steel Authority of India — Bhilai</div>
        </div>
        <div class="client-card">
          <div class="client-name">Toyota Kirloskar</div>
          <div class="client-type">Automotive Manufacturing — Bidadi</div>
        </div>
        <div class="client-card">
          <div class="client-name">Honda Gujarat</div>
          <div class="client-type">Automotive Manufacturing — Gujarat</div>
        </div>
        <div class="client-card">
          <div class="client-name">JSW Dolvi</div>
          <div class="client-type">Steel Manufacturing — Dolvi</div>
        </div>
        <div class="client-card">
          <div class="client-name">JSW Bellary</div>
          <div class="client-type">Steel Manufacturing — Bellary</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- PROJECTS STATION -->
<div class="station-overlay" id="projects-station">
  <div class="content">
    <div class="glass-panel">
      <div class="section-label">Selected Work</div>
      <div class="section-title">36+ deployed systems</div>
      <div class="project-filters">
        <button class="filter-btn active" data-filter="all">All Projects</button>
        <button class="filter-btn" data-filter="measurement">Measurement</button>
        <button class="filter-btn" data-filter="safety">Safety</button>
        <button class="filter-btn" data-filter="thermal">Thermal</button>
        <button class="filter-btn" data-filter="monitoring">Equipment</button>
        <button class="filter-btn" data-filter="detection">Detection</button>
        <button class="filter-btn" data-filter="automotive">Automotive</button>
      </div>
      <div class="projects-grid" id="projectsGrid">

        <div class="project-card" data-category="measurement">
          <div class="project-category">measurement</div>
          <div class="project-title">Hot Slab Width Measurement</div>
          <div class="project-client">JSW Bellary — SMS1 Caster 2 &amp; 4</div>
          <div class="project-desc">Real-time measurement of 1200&deg;C slab width with sub-millimeter accuracy using high-temperature industrial cameras.</div>
          <div class="project-tags">
            <span class="project-tag">Python</span><span class="project-tag">OpenCV</span><span class="project-tag">High-Temp Cameras</span><span class="project-tag">PLC</span>
          </div>
        </div>

        <div class="project-card" data-category="measurement">
          <div class="project-category">measurement</div>
          <div class="project-title">SAM Slab Positioning System</div>
          <div class="project-client">JSW Bellary — HSM2</div>
          <div class="project-desc">SAM-powered slab positioning with PLC integration for precise alignment in hot strip mill operations.</div>
          <div class="project-tags">
            <span class="project-tag">SAM</span><span class="project-tag">OpenCV</span><span class="project-tag">PLC</span><span class="project-tag">Ladder Logic</span>
          </div>
        </div>

        <div class="project-card" data-category="measurement">
          <div class="project-category">measurement</div>
          <div class="project-title">Slab Width Measurement</div>
          <div class="project-client">JSW Dolvi — HSM2</div>
          <div class="project-desc">Real-time width measurement of moving slabs on the production line with database logging.</div>
          <div class="project-tags">
            <span class="project-tag">Python</span><span class="project-tag">OpenCV</span><span class="project-tag">Industrial Cameras</span><span class="project-tag">PostgreSQL</span>
          </div>
        </div>

        <div class="project-card" data-category="measurement">
          <div class="project-category">measurement</div>
          <div class="project-title">Hot Plate Width &amp; Alignment</div>
          <div class="project-client">SAIL Bhilai — Plate Mill</div>
          <div class="project-desc">Plate deviation measurement in mm using YOLO segmentation for quality control.</div>
          <div class="project-tags">
            <span class="project-tag">YOLO Segmentation</span><span class="project-tag">OpenCV</span><span class="project-tag">PLC</span>
          </div>
        </div>

        <div class="project-card" data-category="safety">
          <div class="project-category">safety</div>
          <div class="project-title">AI Intrusion Detection</div>
          <div class="project-client">JSW Bellary — HSM2</div>
          <div class="project-desc">YOLO-based unauthorized personnel detection in hazardous zones with real-time PLC alerts.</div>
          <div class="project-tags">
            <span class="project-tag">YOLO</span><span class="project-tag">OpenCV</span><span class="project-tag">PLC</span><span class="project-tag">HMI</span>
          </div>
        </div>

        <div class="project-card" data-category="safety">
          <div class="project-category">safety</div>
          <div class="project-title">Fire &amp; Smoke Detection</div>
          <div class="project-client">RMHS JSW Bellary — J28C1 &amp; J28C2</div>
          <div class="project-desc">AI-powered fire and smoke detection on conveyor belt systems with automated alerts.</div>
          <div class="project-tags">
            <span class="project-tag">Deep Learning</span><span class="project-tag">OpenCV</span><span class="project-tag">PLC</span><span class="project-tag">HMI</span>
          </div>
        </div>

        <div class="project-card" data-category="safety">
          <div class="project-category">safety</div>
          <div class="project-title">Bleeding Breakout Detection</div>
          <div class="project-client">SMS4 JSW Bellary</div>
          <div class="project-desc">Thermal monitoring of caster mold to detect bleeding breakout conditions before critical failure.</div>
          <div class="project-tags">
            <span class="project-tag">Thermal Cameras</span><span class="project-tag">Anomaly Detection</span><span class="project-tag">PLC</span>
          </div>
        </div>

        <div class="project-card" data-category="thermal">
          <div class="project-category">thermal</div>
          <div class="project-title">Shell Thermal Monitoring</div>
          <div class="project-client">JSW Bellary — SMS3</div>
          <div class="project-desc">Ladle and converter shell thermal scanning for structural integrity monitoring.</div>
          <div class="project-tags">
            <span class="project-tag">Thermal Cameras</span><span class="project-tag">Temp Analysis</span><span class="project-tag">PLC</span>
          </div>
        </div>

        <div class="project-card" data-category="thermal">
          <div class="project-category">thermal</div>
          <div class="project-title">Tuyeres Monitoring System</div>
          <div class="project-client">BF3 JSW Bellary</div>
          <div class="project-desc">Blast furnace tuyere temperature monitoring using thermal cameras for process optimization.</div>
          <div class="project-tags">
            <span class="project-tag">Thermal Cameras</span><span class="project-tag">OpenCV</span><span class="project-tag">PLC</span>
          </div>
        </div>

        <div class="project-card" data-category="thermal">
          <div class="project-category">thermal</div>
          <div class="project-title">BF Surface 3D Temperature</div>
          <div class="project-client">BF JSW Bellary</div>
          <div class="project-desc">Interactive 3D blast furnace temperature visualization for real-time process monitoring.</div>
          <div class="project-tags">
            <span class="project-tag">3D Visualization</span><span class="project-tag">Thermal Processing</span>
          </div>
        </div>

        <div class="project-card" data-category="monitoring">
          <div class="project-category">equipment</div>
          <div class="project-title">Raspberry Pi Vibration Monitor</div>
          <div class="project-client">JSW Bellary — BF2 Stock House</div>
          <div class="project-desc">Low-cost Raspberry Pi-based vibration detection system for equipment health monitoring.</div>
          <div class="project-tags">
            <span class="project-tag">Raspberry Pi</span><span class="project-tag">OpenCV</span><span class="project-tag">PLC</span><span class="project-tag">HMI</span>
          </div>
        </div>

        <div class="project-card" data-category="monitoring">
          <div class="project-category">equipment</div>
          <div class="project-title">Belt Inspection System</div>
          <div class="project-client">JSW Bellary</div>
          <div class="project-desc">Real-time conveyor belt defect detection for preventive maintenance.</div>
          <div class="project-tags">
            <span class="project-tag">OpenCV</span><span class="project-tag">Defect Detection</span><span class="project-tag">PLC</span>
          </div>
        </div>

        <div class="project-card" data-category="detection">
          <div class="project-category">detection</div>
          <div class="project-title">Surface Defect Detection</div>
          <div class="project-client">SAIL Bhilai</div>
          <div class="project-desc">AI-powered surface defect detection on blooms and billets for quality assurance.</div>
          <div class="project-tags">
            <span class="project-tag">YOLO</span><span class="project-tag">Deep Learning</span><span class="project-tag">OpenCV</span>
          </div>
        </div>

        <div class="project-card" data-category="detection">
          <div class="project-category">detection</div>
          <div class="project-title">Steel Bar Pin Hole Detection</div>
          <div class="project-client">JSW Bellary — WRM2</div>
          <div class="project-desc">Pin hole defect detection at production line speed for wire rod mill.</div>
          <div class="project-tags">
            <span class="project-tag">Deep Learning</span><span class="project-tag">OpenCV</span><span class="project-tag">Defect Detection</span>
          </div>
        </div>

        <div class="project-card" data-category="detection">
          <div class="project-category">detection</div>
          <div class="project-title">Slab ID &amp; Rail ID OCR</div>
          <div class="project-client">JSW Bellary &amp; SAIL Bhilai</div>
          <div class="project-desc">Automated OCR-based tracking and identification of slabs and rails.</div>
          <div class="project-tags">
            <span class="project-tag">OCR</span><span class="project-tag">OpenCV</span><span class="project-tag">PostgreSQL</span>
          </div>
        </div>

        <div class="project-card" data-category="automotive">
          <div class="project-category">automotive</div>
          <div class="project-title">Under Body Inspection System</div>
          <div class="project-client">Toyota Kirloskar Motor — Bidadi</div>
          <div class="project-desc">Automated vehicle under-body inspection using deep learning for manufacturing quality control.</div>
          <div class="project-tags">
            <span class="project-tag">Deep Learning</span><span class="project-tag">Object Detection</span><span class="project-tag">Industrial Cameras</span>
          </div>
        </div>

        <div class="project-card" data-category="automotive">
          <div class="project-category">automotive</div>
          <div class="project-title">AI Homologation Check</div>
          <div class="project-client">Honda Gujarat</div>
          <div class="project-desc">AI-based regulatory compliance verification for automotive homologation requirements.</div>
          <div class="project-tags">
            <span class="project-tag">Deep Learning</span><span class="project-tag">Image Classification</span><span class="project-tag">Object Detection</span>
          </div>
        </div>

        <div class="project-card" data-category="automotive">
          <div class="project-category">automotive</div>
          <div class="project-title">Man Movement &amp; Vehicle Safety</div>
          <div class="project-client">Toyota Kirloskar Motor — Bidadi</div>
          <div class="project-desc">Human movement and vehicle detection system for factory floor safety compliance.</div>
          <div class="project-tags">
            <span class="project-tag">YOLO</span><span class="project-tag">Object Tracking</span><span class="project-tag">Video Analytics</span>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<!-- CONTACT STATION -->
<div class="station-overlay" id="contact-station">
  <div class="content">
    <div class="glass-panel">
      <div class="contact-content">
        <div class="section-label" style="justify-content:center">Contact</div>
        <div class="contact-title">Let's build something together.</div>
        <p class="contact-sub">I'm open to new opportunities in computer vision, applied AI, and industrial automation. Let's connect.</p>
        <div class="contact-links">
          <a href="mailto:subramanyagbellary@gmail.com" class="contact-link">
            <svg viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
            subramanyagbellary@gmail.com
          </a>
          <a href="https://www.linkedin.com/in/subramanyagbellary" target="_blank" rel="noopener" class="contact-link">
            <svg viewBox="0 0 24 24"><path d="M19 3a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h14m-.5 15.5v-5.3a3.26 3.26 0 00-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 011.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 001.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 00-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"/></svg>
            LinkedIn
          </a>
          <a href="https://github.com/subramanyaSgb" target="_blank" rel="noopener" class="contact-link">
            <svg viewBox="0 0 24 24"><path d="M12 2A10 10 0 002 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0012 2z"/></svg>
            GitHub
          </a>
          <a href="tel:+917892389809" class="contact-link">
            <svg viewBox="0 0 24 24"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg>
            +91 789-238-9809
          </a>
        </div>
        <div class="footer-text">&copy; 2026 <span>Subramanya Gopal Bellary</span><br>Built with precision — like all my systems.</div>
      </div>
    </div>
  </div>
</div>

<!-- SCROLL CONTAINER (drives the scroll animation) -->
<div class="scroll-container"></div>

<!-- CDN Scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

<script>
// ============================================================
// WebGL Check
// ============================================================
function hasWebGL() {
  try {
    var canvas = document.createElement('canvas');
    return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));
  } catch (e) { return false; }
}

if (!hasWebGL()) {
  document.getElementById('factory-canvas').style.display = 'none';
  document.getElementById('noWebgl').classList.add('active');
  // Make all overlays visible in fallback mode
  document.querySelectorAll('.station-overlay').forEach(function(el) { el.classList.add('visible'); });
}

// ============================================================
// GSAP Registration
// ============================================================
gsap.registerPlugin(ScrollTrigger);

// ============================================================
// Mobile Detection
// ============================================================
var isMobile = window.innerWidth < 768;

// ============================================================
// Navigation
// ============================================================
var stationScrollPercents = [0, 0.17, 0.32, 0.47, 0.62, 0.92];

function scrollToStation(index) {
  var scrollH = document.querySelector('.scroll-container').scrollHeight - window.innerHeight;
  var target = stationScrollPercents[index] * scrollH;
  window.scrollTo({ top: target, behavior: 'smooth' });
  // Close mobile nav
  document.getElementById('navLinks').classList.remove('open');
}

function toggleMobileNav() {
  document.getElementById('navLinks').classList.toggle('open');
}

// ============================================================
// Scroll Progress Bar
// ============================================================
window.addEventListener('scroll', function() {
  var scrollTop = window.pageYOffset || document.documentElement.scrollTop;
  var scrollH = document.documentElement.scrollHeight - window.innerHeight;
  var pct = scrollH > 0 ? (scrollTop / scrollH) * 100 : 0;
  document.getElementById('scroll-progress').style.width = pct + '%';
});

// ============================================================
// Project Filter
// ============================================================
document.querySelectorAll('.filter-btn').forEach(function(btn) {
  btn.addEventListener('click', function() {
    document.querySelectorAll('.filter-btn').forEach(function(b) { b.classList.remove('active'); });
    btn.classList.add('active');
    var filter = btn.getAttribute('data-filter');
    document.querySelectorAll('.project-card').forEach(function(card) {
      if (filter === 'all' || card.getAttribute('data-category') === filter) {
        card.classList.remove('hidden');
      } else {
        card.classList.add('hidden');
      }
    });
  });
});

// ============================================================
// Counter Animation for Hero Stats
// ============================================================
var countersAnimated = false;
function animateCounters() {
  if (countersAnimated) return;
  countersAnimated = true;
  document.querySelectorAll('.hero-stat .num').forEach(function(el) {
    var target = parseInt(el.getAttribute('data-target'));
    var suffix = '+';
    var obj = { val: 0 };
    gsap.to(obj, {
      val: target,
      duration: 2,
      ease: 'power2.out',
      onUpdate: function() {
        el.textContent = Math.round(obj.val) + suffix;
      }
    });
  });
}

// ============================================================
// THREE.JS FACTORY SCENE
// ============================================================
if (hasWebGL()) {

var canvas = document.getElementById('factory-canvas');
var scene = new THREE.Scene();
scene.background = new THREE.Color(0x0a0a0b);
scene.fog = new THREE.FogExp2(0x0a0a0b, 0.006);

var camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 500);
camera.position.set(0, 10, 100);

var renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: !isMobile });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(isMobile ? Math.min(window.devicePixelRatio, 1.5) : Math.min(window.devicePixelRatio, 2));
renderer.shadowMap.enabled = !isMobile;
renderer.toneMapping = THREE.ACESFilmicToneMapping;
renderer.toneMappingExposure = 1.0;

// ---- LIGHTING ----
var ambientLight = new THREE.AmbientLight(0x1a1a2e, 0.3);
scene.add(ambientLight);

var pointLightPositions = isMobile
  ? [[0, 25, 80], [0, 25, -80]]
  : [[0, 25, 80], [0, 25, 20], [0, 25, -50], [0, 25, -120], [0, 25, -200]];
pointLightPositions.forEach(function(pos) {
  var pl = new THREE.PointLight(0xff6b35, 1.0, 80);
  pl.position.set(pos[0], pos[1], pos[2]);
  scene.add(pl);
});

var spotLight = new THREE.SpotLight(0x10b981, 0.5, 60, Math.PI / 6, 0.5);
spotLight.position.copy(camera.position);
scene.add(spotLight);

// ---- MATERIALS ----
var floorMat = new THREE.MeshStandardMaterial({ color: 0x1a1a1e, roughness: 0.9, metalness: 0.1 });
var wallMat = new THREE.MeshStandardMaterial({ color: 0x1c1c20, roughness: 0.8, metalness: 0.3 });
var ceilingMat = new THREE.MeshStandardMaterial({ color: 0x0f0f12, roughness: 1.0, metalness: 0.0 });
var metalMat = new THREE.MeshStandardMaterial({ color: 0x3a3a40, roughness: 0.4, metalness: 0.8 });
var greenEmissive = new THREE.MeshStandardMaterial({ color: 0x10b981, emissive: 0x10b981, emissiveIntensity: 0.5, roughness: 0.3, metalness: 0.6 });
var orangeEmissive = new THREE.MeshStandardMaterial({ color: 0xf97316, emissive: 0xf97316, emissiveIntensity: 0.3, roughness: 0.5, metalness: 0.5 });
var darkMetal = new THREE.MeshStandardMaterial({ color: 0x2a2a30, roughness: 0.5, metalness: 0.7 });
var screenMat = new THREE.MeshStandardMaterial({ color: 0x102030, emissive: 0x10b981, emissiveIntensity: 0.15, roughness: 0.2, metalness: 0.1 });
var hazardYellow = new THREE.MeshStandardMaterial({ color: 0xf5c518, roughness: 0.5, metalness: 0.3 });
var hazardBlack = new THREE.MeshStandardMaterial({ color: 0x1a1a1a, roughness: 0.6, metalness: 0.2 });
var plaqueMat = new THREE.MeshStandardMaterial({ color: 0x4a4a55, roughness: 0.3, metalness: 0.9 });
var wireframeMat = new THREE.MeshBasicMaterial({ color: 0x222228, wireframe: true, transparent: true, opacity: 0.15 });

// ---- FLOOR ----
var floorGeo = new THREE.PlaneGeometry(200, 400);
var floor = new THREE.Mesh(floorGeo, floorMat);
floor.rotation.x = -Math.PI / 2;
floor.position.set(0, 0, -75);
scene.add(floor);
var floorWire = new THREE.Mesh(new THREE.PlaneGeometry(200, 400, 40, 80), wireframeMat);
floorWire.rotation.x = -Math.PI / 2;
floorWire.position.set(0, 0.01, -75);
scene.add(floorWire);

// ---- WALLS ----
var wallGeo = new THREE.BoxGeometry(2, 30, 400);
var leftWall = new THREE.Mesh(wallGeo, wallMat);
leftWall.position.set(-25, 15, -75);
scene.add(leftWall);
var rightWall = new THREE.Mesh(wallGeo, wallMat);
rightWall.position.set(25, 15, -75);
scene.add(rightWall);

// ---- CEILING ----
var ceilingGeo = new THREE.PlaneGeometry(200, 400);
var ceiling = new THREE.Mesh(ceilingGeo, ceilingMat);
ceiling.rotation.x = Math.PI / 2;
ceiling.position.set(0, 30, -75);
scene.add(ceiling);

// ---- PILLARS ----
var pillarCount = isMobile ? 4 : 7;
for (var i = 0; i < pillarCount; i++) {
  var z = 100 - i * 55;
  // Left pillars
  var pillarGeo = new THREE.CylinderGeometry(0.5, 0.5, 30, 8);
  var pillarL = new THREE.Mesh(pillarGeo, metalMat);
  pillarL.position.set(-23, 15, z);
  scene.add(pillarL);
  // Right pillars
  var pillarR = new THREE.Mesh(pillarGeo, metalMat);
  pillarR.position.set(23, 15, z);
  scene.add(pillarR);
}

// ---- PIPES along ceiling/wall junction ----
var pipeSections = [
  { z: -75, len: 380 }
];
pipeSections.forEach(function(sec) {
  var pipeGeo = new THREE.CylinderGeometry(0.3, 0.3, sec.len, 6);
  pipeGeo.rotateX(Math.PI / 2);
  var pipeL = new THREE.Mesh(pipeGeo, greenEmissive);
  pipeL.position.set(-23.5, 28, sec.z);
  scene.add(pipeL);
  var pipeR = new THREE.Mesh(pipeGeo, greenEmissive);
  pipeR.position.set(23.5, 28, sec.z);
  scene.add(pipeR);
  // Lower pipes
  var pipe2L = new THREE.Mesh(new THREE.CylinderGeometry(0.2, 0.2, sec.len, 6), greenEmissive);
  pipe2L.rotation.x = Math.PI / 2;
  pipe2L.position.set(-23.5, 25, sec.z);
  scene.add(pipe2L);
  var pipe2R = new THREE.Mesh(new THREE.CylinderGeometry(0.2, 0.2, sec.len, 6), greenEmissive);
  pipe2R.rotation.x = Math.PI / 2;
  pipe2R.position.set(23.5, 25, sec.z);
  scene.add(pipe2R);
});

// ============================================================
// STATION 1: ENTRANCE / HERO (Z=100 to 60)
// ============================================================
// Gate pillars
var gatePillarGeo = new THREE.BoxGeometry(1.5, 18, 1.5);
var gateL = new THREE.Mesh(gatePillarGeo, metalMat);
gateL.position.set(-8, 9, 95);
scene.add(gateL);
var gateR = new THREE.Mesh(gatePillarGeo, metalMat);
gateR.position.set(8, 9, 95);
scene.add(gateR);
// Gate beam
var gateBeam = new THREE.Mesh(new THREE.BoxGeometry(18, 1.5, 1.5), metalMat);
gateBeam.position.set(0, 18, 95);
scene.add(gateBeam);

// SGB Sign using Canvas texture
var signCanvas = document.createElement('canvas');
signCanvas.width = 512;
signCanvas.height = 128;
var ctx = signCanvas.getContext('2d');
ctx.fillStyle = '#1a1a1e';
ctx.fillRect(0, 0, 512, 128);
ctx.fillStyle = '#10b981';
ctx.font = 'bold 72px monospace';
ctx.textAlign = 'center';
ctx.textBaseline = 'middle';
ctx.fillText('S G B', 256, 55);
ctx.fillStyle = '#71717a';
ctx.font = '18px monospace';
ctx.fillText('COMPUTER VISION ENGINEER', 256, 100);
var signTexture = new THREE.CanvasTexture(signCanvas);
var signMat = new THREE.MeshStandardMaterial({ map: signTexture, emissive: 0x10b981, emissiveIntensity: 0.1 });
var signMesh = new THREE.Mesh(new THREE.PlaneGeometry(10, 2.5), signMat);
signMesh.position.set(0, 15, 94.2);
scene.add(signMesh);

// Hazard stripes on gate pillars
for (var hs = 0; hs < 6; hs++) {
  var stripeY = hs * 3;
  var stripeMatPick = hs % 2 === 0 ? hazardYellow : hazardBlack;
  var stripeL = new THREE.Mesh(new THREE.BoxGeometry(1.52, 0.5, 1.52), stripeMatPick);
  stripeL.position.set(-8, stripeY + 0.25, 95);
  scene.add(stripeL);
  var stripeR = new THREE.Mesh(new THREE.BoxGeometry(1.52, 0.5, 1.52), stripeMatPick);
  stripeR.position.set(8, stripeY + 0.25, 95);
  scene.add(stripeR);
}

// ============================================================
// STATION 2: CONTROL ROOM / ABOUT (Z=60 to 20)
// ============================================================
// Desk / console
var deskGeo = new THREE.BoxGeometry(8, 3, 3);
var desk = new THREE.Mesh(deskGeo, darkMetal);
desk.position.set(5, 1.5, 35);
scene.add(desk);

// 3 Monitors on the desk
for (var mi = 0; mi < 3; mi++) {
  var monX = 3 + mi * 2;
  // Screen
  var monScreen = new THREE.Mesh(new THREE.BoxGeometry(1.5, 1.2, 0.1), screenMat);
  monScreen.position.set(monX, 4.2, 34);
  scene.add(monScreen);
  // Glow edge
  var monGlow = new THREE.Mesh(new THREE.BoxGeometry(1.6, 1.3, 0.05), greenEmissive);
  monGlow.position.set(monX, 4.2, 33.9);
  scene.add(monGlow);
  // Stand
  var monStand = new THREE.Mesh(new THREE.CylinderGeometry(0.1, 0.2, 1, 6), metalMat);
  monStand.position.set(monX, 3.5, 34.2);
  scene.add(monStand);
}

// Control panel with LED dots
var panelGeo = new THREE.BoxGeometry(6, 2, 0.3);
var panel = new THREE.Mesh(panelGeo, darkMetal);
panel.position.set(5, 3.5, 36);
panel.rotation.x = -0.3;
scene.add(panel);
// LED dots on panel
for (var li = 0; li < 12; li++) {
  var ledX = 3 + (li % 4) * 1.2;
  var ledY = 3.8 + Math.floor(li / 4) * 0.5;
  var ledColor = li % 3 === 0 ? orangeEmissive : greenEmissive;
  var led = new THREE.Mesh(new THREE.SphereGeometry(0.08, 6, 6), ledColor);
  led.position.set(ledX, ledY, 35.8);
  scene.add(led);
}

// Chair
var chairSeat = new THREE.Mesh(new THREE.BoxGeometry(1.5, 0.3, 1.5), darkMetal);
chairSeat.position.set(5, 2, 38);
scene.add(chairSeat);
var chairBack = new THREE.Mesh(new THREE.BoxGeometry(1.5, 2, 0.3), darkMetal);
chairBack.position.set(5, 3, 38.7);
scene.add(chairBack);

// ============================================================
// STATION 3: ASSEMBLY FLOOR / SKILLS (Z=20 to -20)
// ============================================================
// Machine silhouettes (box/cylinder groups)
var machinePositions = [[-10, 0], [-10, -10], [10, 0], [10, -10], [-15, -5], [15, -5]];
machinePositions.forEach(function(mp) {
  var mGroup = new THREE.Group();
  // Base
  mGroup.add(createBox(3, 4, 3, metalMat, 0, 2, 0));
  // Top cylinder
  mGroup.add(createCylinder(0.8, 3, darkMetal, 0, 5.5, 0));
  // Pipe extension
  mGroup.add(createCylinder(0.2, 4, greenEmissive, 1.5, 5, 0, Math.PI / 2, 0, 0));
  mGroup.position.set(mp[0], 0, mp[1]);
  scene.add(mGroup);
});

// Overhead crane beam
var craneBeam = new THREE.Mesh(new THREE.BoxGeometry(46, 1, 1.5), metalMat);
craneBeam.position.set(0, 26, 0);
scene.add(craneBeam);
// Crane rails
var craneRailL = new THREE.Mesh(new THREE.BoxGeometry(0.5, 0.5, 40), metalMat);
craneRailL.position.set(-23, 27, 0);
scene.add(craneRailL);
var craneRailR = new THREE.Mesh(new THREE.BoxGeometry(0.5, 0.5, 40), metalMat);
craneRailR.position.set(23, 27, 0);
scene.add(craneRailR);
// Crane trolley
var craneTrolley = new THREE.Mesh(new THREE.BoxGeometry(3, 1.5, 2), orangeEmissive);
craneTrolley.position.set(0, 25, 0);
scene.add(craneTrolley);

// Conveyor section (small)
var convBase = new THREE.Mesh(new THREE.BoxGeometry(4, 1, 10), darkMetal);
convBase.position.set(0, 1.5, -5);
scene.add(convBase);
for (var cr = 0; cr < 8; cr++) {
  var roller = new THREE.Mesh(new THREE.CylinderGeometry(0.2, 0.2, 4, 8), metalMat);
  roller.rotation.z = Math.PI / 2;
  roller.position.set(0, 2.1, -9 + cr * 1.2);
  scene.add(roller);
}

// ============================================================
// STATION 4: PRODUCTION LINE / EXPERIENCE (Z=-20 to -70)
// ============================================================
// Long conveyor belt
var conveyorLen = 45;
var conveyorBase = new THREE.Mesh(new THREE.BoxGeometry(5, 1.5, conveyorLen), darkMetal);
conveyorBase.position.set(0, 1, -45);
scene.add(conveyorBase);
// Belt surface
var beltMat = new THREE.MeshStandardMaterial({ color: 0x2a2a2a, roughness: 0.95, metalness: 0.0 });
var belt = new THREE.Mesh(new THREE.BoxGeometry(4.5, 0.1, conveyorLen - 0.5), beltMat);
belt.position.set(0, 1.8, -45);
scene.add(belt);
// Rollers underneath
for (var ri = 0; ri < 18; ri++) {
  var rZ = -24 - ri * 2.4;
  var rollerU = new THREE.Mesh(new THREE.CylinderGeometry(0.3, 0.3, 5, 8), metalMat);
  rollerU.rotation.z = Math.PI / 2;
  rollerU.position.set(0, 0.5, rZ);
  scene.add(rollerU);
}
// Side rails
var sideRailGeo = new THREE.BoxGeometry(0.3, 0.8, conveyorLen);
var sideRailL = new THREE.Mesh(sideRailGeo, metalMat);
sideRailL.position.set(-2.5, 2.3, -45);
scene.add(sideRailL);
var sideRailR = new THREE.Mesh(sideRailGeo, metalMat);
sideRailR.position.set(2.5, 2.3, -45);
scene.add(sideRailR);

// Glowing station markers along the conveyor
var stationMarkerPositions = [-30, -38, -46, -54, -62];
stationMarkerPositions.forEach(function(sz) {
  var marker = new THREE.Mesh(new THREE.CylinderGeometry(0.15, 0.15, 3, 6), greenEmissive);
  marker.position.set(3.5, 2.5, sz);
  scene.add(marker);
  var markerTop = new THREE.Mesh(new THREE.SphereGeometry(0.3, 8, 8), greenEmissive);
  markerTop.position.set(3.5, 4.1, sz);
  scene.add(markerTop);
});

// ============================================================
// STATION 5: TROPHY WALL / CLIENTS (Z=-70 to -120)
// ============================================================
// Back wall section
var trophyWall = new THREE.Mesh(new THREE.BoxGeometry(40, 20, 1), wallMat);
trophyWall.position.set(0, 10, -110);
scene.add(trophyWall);
// 6 metallic plaques (3x2 grid)
for (var pi = 0; pi < 6; pi++) {
  var px = -10 + (pi % 3) * 10;
  var py = 10 + (pi < 3 ? 3 : -3);
  var plaque = new THREE.Mesh(new THREE.BoxGeometry(6, 3, 0.3), plaqueMat);
  plaque.position.set(px, py, -109.3);
  scene.add(plaque);
  // Plaque glow border (top edge)
  var plaqueGlow = new THREE.Mesh(new THREE.BoxGeometry(6.2, 0.15, 0.1), greenEmissive);
  plaqueGlow.position.set(px, py + 1.5, -109.1);
  scene.add(plaqueGlow);
}

// ============================================================
// STATION 6: PROJECT BAYS (Z=-120 to -190)
// ============================================================
// Open-front bay rooms along walls
var bayPositions = [-135, -155, -175];
bayPositions.forEach(function(bz) {
  // Left bay
  var bayFloor = new THREE.Mesh(new THREE.BoxGeometry(12, 0.2, 14), darkMetal);
  bayFloor.position.set(-16, 0.1, bz);
  scene.add(bayFloor);
  var bayBack = new THREE.Mesh(new THREE.BoxGeometry(0.3, 12, 14), wallMat);
  bayBack.position.set(-22, 6, bz);
  scene.add(bayBack);
  var baySide1 = new THREE.Mesh(new THREE.BoxGeometry(12, 12, 0.3), wallMat);
  baySide1.position.set(-16, 6, bz - 7);
  scene.add(baySide1);
  var baySide2 = new THREE.Mesh(new THREE.BoxGeometry(12, 12, 0.3), wallMat);
  baySide2.position.set(-16, 6, bz + 7);
  scene.add(baySide2);
  // Monitor in bay
  var bayMon = new THREE.Mesh(new THREE.BoxGeometry(3, 2, 0.1), screenMat);
  bayMon.position.set(-21.5, 6, bz);
  scene.add(bayMon);
  var bayMonGlow = new THREE.Mesh(new THREE.BoxGeometry(3.2, 2.2, 0.05), greenEmissive);
  bayMonGlow.position.set(-21.5, 6, bz + 0.1);
  scene.add(bayMonGlow);

  // Right bay
  var bayFloorR = new THREE.Mesh(new THREE.BoxGeometry(12, 0.2, 14), darkMetal);
  bayFloorR.position.set(16, 0.1, bz);
  scene.add(bayFloorR);
  var bayBackR = new THREE.Mesh(new THREE.BoxGeometry(0.3, 12, 14), wallMat);
  bayBackR.position.set(22, 6, bz);
  scene.add(bayBackR);
  var baySide1R = new THREE.Mesh(new THREE.BoxGeometry(12, 12, 0.3), wallMat);
  baySide1R.position.set(16, 6, bz - 7);
  scene.add(baySide1R);
  var baySide2R = new THREE.Mesh(new THREE.BoxGeometry(12, 12, 0.3), wallMat);
  baySide2R.position.set(16, 6, bz + 7);
  scene.add(baySide2R);
  // Monitor in right bay
  var bayMonR = new THREE.Mesh(new THREE.BoxGeometry(3, 2, 0.1), screenMat);
  bayMonR.position.set(21.5, 6, bz);
  scene.add(bayMonR);
  var bayMonGlowR = new THREE.Mesh(new THREE.BoxGeometry(3.2, 2.2, 0.05), greenEmissive);
  bayMonGlowR.position.set(21.5, 6, bz - 0.1);
  scene.add(bayMonGlowR);
});

// ============================================================
// STATION 7: OFFICE / CONTACT (Z=-190 to -250)
// ============================================================
// Desk
var officeDeskGeo = new THREE.BoxGeometry(6, 2.5, 3);
var officeDesk = new THREE.Mesh(officeDeskGeo, darkMetal);
officeDesk.position.set(0, 1.25, -225);
scene.add(officeDesk);
// Monitor on desk
var officeMon = new THREE.Mesh(new THREE.BoxGeometry(3, 2, 0.1), screenMat);
officeMon.position.set(0, 3.5, -225.5);
scene.add(officeMon);
var officeMonGlow = new THREE.Mesh(new THREE.BoxGeometry(3.2, 2.2, 0.05), greenEmissive);
officeMonGlow.position.set(0, 3.5, -225.6);
scene.add(officeMonGlow);
// Monitor stand
var officeMonStand = new THREE.Mesh(new THREE.CylinderGeometry(0.15, 0.25, 1, 6), metalMat);
officeMonStand.position.set(0, 2.8, -225.3);
scene.add(officeMonStand);

// Office chair
var offChairSeat = new THREE.Mesh(new THREE.BoxGeometry(1.5, 0.3, 1.5), darkMetal);
offChairSeat.position.set(0, 2, -222);
scene.add(offChairSeat);
var offChairBack = new THREE.Mesh(new THREE.BoxGeometry(1.5, 2, 0.3), darkMetal);
offChairBack.position.set(0, 3, -221.3);
scene.add(offChairBack);
var offChairLeg = new THREE.Mesh(new THREE.CylinderGeometry(0.1, 0.1, 2, 6), metalMat);
offChairLeg.position.set(0, 1, -222);
scene.add(offChairLeg);

// Door frame at far end
var doorFrameL = new THREE.Mesh(new THREE.BoxGeometry(1, 14, 1), metalMat);
doorFrameL.position.set(-4, 7, -245);
scene.add(doorFrameL);
var doorFrameR = new THREE.Mesh(new THREE.BoxGeometry(1, 14, 1), metalMat);
doorFrameR.position.set(4, 7, -245);
scene.add(doorFrameR);
var doorFrameTop = new THREE.Mesh(new THREE.BoxGeometry(9, 1, 1), metalMat);
doorFrameTop.position.set(0, 14, -245);
scene.add(doorFrameTop);
// Door light
var doorLight = new THREE.PointLight(0x10b981, 1.5, 20);
doorLight.position.set(0, 13, -244);
scene.add(doorLight);

// ============================================================
// HELPER: geometry creation
// ============================================================
function createBox(w, h, d, mat, x, y, z) {
  var m = new THREE.Mesh(new THREE.BoxGeometry(w, h, d), mat);
  m.position.set(x, y, z);
  return m;
}
function createCylinder(r, h, mat, x, y, z, rx, ry, rz) {
  var m = new THREE.Mesh(new THREE.CylinderGeometry(r, r, h, 8), mat);
  m.position.set(x, y, z);
  if (rx) m.rotation.x = rx;
  if (ry) m.rotation.y = ry;
  if (rz) m.rotation.z = rz;
  return m;
}

// ============================================================
// PARTICLE SYSTEMS
// ============================================================
var sparkCount = isMobile ? 40 : 150;
var dustCount = isMobile ? 80 : 300;
var steamCount = isMobile ? 15 : 50;

// 1. Entrance Sparks
var sparkGeo = new THREE.BufferGeometry();
var sparkPositions = new Float32Array(sparkCount * 3);
var sparkVelocities = [];
var sparkColors = new Float32Array(sparkCount * 3);
for (var si = 0; si < sparkCount; si++) {
  sparkPositions[si * 3] = (Math.random() - 0.5) * 16;
  sparkPositions[si * 3 + 1] = 10 + Math.random() * 15;
  sparkPositions[si * 3 + 2] = 80 + Math.random() * 20;
  sparkVelocities.push({
    x: (Math.random() - 0.5) * 0.03,
    y: -(Math.random() * 0.05 + 0.02),
    z: (Math.random() - 0.5) * 0.03
  });
  // Orange/yellow colors
  sparkColors[si * 3] = 0.9 + Math.random() * 0.1;
  sparkColors[si * 3 + 1] = 0.3 + Math.random() * 0.4;
  sparkColors[si * 3 + 2] = 0.0;
}
sparkGeo.setAttribute('position', new THREE.BufferAttribute(sparkPositions, 3));
sparkGeo.setAttribute('color', new THREE.BufferAttribute(sparkColors, 3));
var sparkMat = new THREE.PointsMaterial({ size: 0.15, vertexColors: true, transparent: true, opacity: 0.8, sizeAttenuation: true });
var sparkSystem = new THREE.Points(sparkGeo, sparkMat);
scene.add(sparkSystem);

// 2. Ambient Dust
var dustGeo = new THREE.BufferGeometry();
var dustPositions = new Float32Array(dustCount * 3);
var dustVelocities = [];
for (var di = 0; di < dustCount; di++) {
  dustPositions[di * 3] = (Math.random() - 0.5) * 45;
  dustPositions[di * 3 + 1] = Math.random() * 28;
  dustPositions[di * 3 + 2] = 110 - Math.random() * 370;
  dustVelocities.push({
    x: (Math.random() - 0.5) * 0.005,
    y: (Math.random() - 0.5) * 0.003,
    z: (Math.random() - 0.5) * 0.005
  });
}
dustGeo.setAttribute('position', new THREE.BufferAttribute(dustPositions, 3));
var dustMat = new THREE.PointsMaterial({ size: 0.06, color: 0x555566, transparent: true, opacity: 0.4, sizeAttenuation: true });
var dustSystem = new THREE.Points(dustGeo, dustMat);
scene.add(dustSystem);

// 3. Steam/Smoke
var steamGeo = new THREE.BufferGeometry();
var steamPositions = new Float32Array(steamCount * 3);
var steamVelocities = [];
for (var sti = 0; sti < steamCount; sti++) {
  steamPositions[sti * 3] = (Math.random() - 0.5) * 20;
  steamPositions[sti * 3 + 1] = 2 + Math.random() * 5;
  steamPositions[sti * 3 + 2] = -10 + (Math.random() - 0.5) * 40;
  steamVelocities.push({
    x: (Math.random() - 0.5) * 0.005,
    y: Math.random() * 0.015 + 0.005,
    z: (Math.random() - 0.5) * 0.005
  });
}
steamGeo.setAttribute('position', new THREE.BufferAttribute(steamPositions, 3));
var steamMat = new THREE.PointsMaterial({ size: 0.3, color: 0x889999, transparent: true, opacity: 0.2, sizeAttenuation: true });
var steamSystem = new THREE.Points(steamGeo, steamMat);
scene.add(steamSystem);

// ============================================================
// CAMERA PATH & SCROLL ANIMATION
// ============================================================
var waypoints = [
  { pos: [0, 10, 100], look: [0, 5, 60] },
  { pos: [3, 8, 40],   look: [5, 5, 20] },
  { pos: [-2, 9, 0],   look: [-5, 5, -20] },
  { pos: [0, 7, -45],  look: [0, 4, -65] },
  { pos: [0, 8, -95],  look: [0, 6, -115] },
  { pos: [3, 8, -155], look: [5, 5, -175] },
  { pos: [0, 7, -220], look: [0, 5, -240] }
];

var cameraState = {
  px: waypoints[0].pos[0], py: waypoints[0].pos[1], pz: waypoints[0].pos[2],
  lx: waypoints[0].look[0], ly: waypoints[0].look[1], lz: waypoints[0].look[2]
};

// Build GSAP timeline for camera
var camTimeline = gsap.timeline({
  scrollTrigger: {
    trigger: '.scroll-container',
    start: 'top top',
    end: 'bottom bottom',
    scrub: 1.5
  }
});

// Distribute waypoints evenly across scroll
var segmentDuration = 1 / (waypoints.length - 1);
for (var wi = 1; wi < waypoints.length; wi++) {
  camTimeline.to(cameraState, {
    px: waypoints[wi].pos[0],
    py: waypoints[wi].pos[1],
    pz: waypoints[wi].pos[2],
    lx: waypoints[wi].look[0],
    ly: waypoints[wi].look[1],
    lz: waypoints[wi].look[2],
    duration: segmentDuration,
    ease: 'none'
  });
}

// ============================================================
// OVERLAY VISIBILITY (ScrollTrigger)
// ============================================================
var overlayConfigs = [
  { id: 'hero-station',       start: 0,    end: 0.12,  fadeEnd: 0.15  },
  { id: 'about-station',      start: 0.15, end: 0.27,  fadeEnd: 0.30  },
  { id: 'skills-station',     start: 0.30, end: 0.42,  fadeEnd: 0.45  },
  { id: 'experience-station', start: 0.45, end: 0.57,  fadeEnd: 0.60  },
  { id: 'clients-station',    start: 0.60, end: 0.68,  fadeEnd: 0.72  },
  { id: 'projects-station',   start: 0.72, end: 0.87,  fadeEnd: 0.90  },
  { id: 'contact-station',    start: 0.90, end: 1.0,   fadeEnd: 1.0   }
];

overlayConfigs.forEach(function(cfg) {
  var el = document.getElementById(cfg.id);

  // Fade in
  ScrollTrigger.create({
    trigger: '.scroll-container',
    start: function() { return 'top+=' + (cfg.start * 100) + '% top'; },
    end: function() { return 'top+=' + (cfg.end * 100) + '% top'; },
    onEnter: function() {
      el.classList.add('visible');
      if (cfg.id === 'hero-station') animateCounters();
    },
    onLeave: function() { el.classList.remove('visible'); },
    onEnterBack: function() { el.classList.add('visible'); },
    onLeaveBack: function() { el.classList.remove('visible'); }
  });
});

// ============================================================
// Active nav link tracking
// ============================================================
var navLinkMap = {1:'about',2:'skills',3:'experience',4:'projects',5:'contact'};
ScrollTrigger.create({
  trigger: '.scroll-container',
  start: 'top top',
  end: 'bottom bottom',
  onUpdate: function(self) {
    var pct = self.progress;
    var activeIdx = -1;
    if (pct < 0.15) activeIdx = -1;
    else if (pct < 0.30) activeIdx = 1;
    else if (pct < 0.45) activeIdx = 2;
    else if (pct < 0.60) activeIdx = 3;
    else if (pct < 0.72) activeIdx = 4; // clients share with experience/projects nav
    else if (pct < 0.90) activeIdx = 4;
    else activeIdx = 5;

    document.querySelectorAll('.nav-links a').forEach(function(a) {
      a.classList.remove('active');
      var stIdx = parseInt(a.getAttribute('data-station'));
      if (stIdx === activeIdx) a.classList.add('active');
    });
  }
});

// ============================================================
// RENDER LOOP
// ============================================================
var clock = new THREE.Clock();
var lookTarget = new THREE.Vector3();

function animate() {
  requestAnimationFrame(animate);
  var delta = clock.getDelta();
  var elapsed = clock.getElapsedTime();

  // Update camera position and look target
  camera.position.set(cameraState.px, cameraState.py, cameraState.pz);
  lookTarget.set(cameraState.lx, cameraState.ly, cameraState.lz);
  camera.lookAt(lookTarget);

  // Update spotlight to follow camera
  spotLight.position.copy(camera.position);
  spotLight.target.position.copy(lookTarget);
  spotLight.target.updateMatrixWorld();

  // Animate sparks
  var sparkPos = sparkSystem.geometry.attributes.position.array;
  for (var spi = 0; spi < sparkCount; spi++) {
    sparkPos[spi * 3] += sparkVelocities[spi].x;
    sparkPos[spi * 3 + 1] += sparkVelocities[spi].y;
    sparkPos[spi * 3 + 2] += sparkVelocities[spi].z;
    // Reset if fallen below
    if (sparkPos[spi * 3 + 1] < 0) {
      sparkPos[spi * 3] = (Math.random() - 0.5) * 16;
      sparkPos[spi * 3 + 1] = 10 + Math.random() * 15;
      sparkPos[spi * 3 + 2] = 80 + Math.random() * 20;
      sparkVelocities[spi].y = -(Math.random() * 0.05 + 0.02);
    }
  }
  sparkSystem.geometry.attributes.position.needsUpdate = true;

  // Animate dust
  var dustPos = dustSystem.geometry.attributes.position.array;
  for (var ddi = 0; ddi < dustCount; ddi++) {
    dustPos[ddi * 3] += dustVelocities[ddi].x + Math.sin(elapsed * 0.3 + ddi) * 0.001;
    dustPos[ddi * 3 + 1] += dustVelocities[ddi].y + Math.sin(elapsed * 0.5 + ddi * 0.7) * 0.001;
    dustPos[ddi * 3 + 2] += dustVelocities[ddi].z;
    // Wrap boundaries
    if (dustPos[ddi * 3 + 1] > 29) dustPos[ddi * 3 + 1] = 1;
    if (dustPos[ddi * 3 + 1] < 0) dustPos[ddi * 3 + 1] = 28;
  }
  dustSystem.geometry.attributes.position.needsUpdate = true;

  // Animate steam
  var steamPos = steamSystem.geometry.attributes.position.array;
  for (var sti2 = 0; sti2 < steamCount; sti2++) {
    steamPos[sti2 * 3] += steamVelocities[sti2].x;
    steamPos[sti2 * 3 + 1] += steamVelocities[sti2].y;
    steamPos[sti2 * 3 + 2] += steamVelocities[sti2].z;
    if (steamPos[sti2 * 3 + 1] > 20) {
      steamPos[sti2 * 3] = (Math.random() - 0.5) * 20;
      steamPos[sti2 * 3 + 1] = 2 + Math.random() * 3;
      steamPos[sti2 * 3 + 2] = -10 + (Math.random() - 0.5) * 40;
    }
  }
  steamSystem.geometry.attributes.position.needsUpdate = true;

  // Animate crane trolley (subtle oscillation)
  craneTrolley.position.x = Math.sin(elapsed * 0.3) * 8;

  // Pulsate LEDs
  greenEmissive.emissiveIntensity = 0.4 + Math.sin(elapsed * 2) * 0.15;
  orangeEmissive.emissiveIntensity = 0.25 + Math.sin(elapsed * 3 + 1) * 0.1;

  renderer.render(scene, camera);
}
animate();

// ============================================================
// RESIZE
// ============================================================
window.addEventListener('resize', function() {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
  isMobile = window.innerWidth < 768;
});

// Show hero on load
setTimeout(function() {
  document.getElementById('hero-station').classList.add('visible');
  animateCounters();
}, 100);

} // end WebGL block

</script>
</body>
</html>